<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>[WIP]操作マニュアル | CityGML編集ツール </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="[WIP]操作マニュアル | CityGML編集ツール ">
    
    
      <link rel="shortcut icon" href="../favicon.ico">
      <link rel="stylesheet" href="../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../styles/docfx.css">
      <link rel="stylesheet" href="../styles/main.css">
      <meta property="docfx:navrel" content="../toc.html">
      <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="wip操作マニュアル">[WIP]操作マニュアル</h1>

<h2 id="1-本書について">1. 本書について</h2>
<p>本書では、CityGML編集ツール（以下「本ツール」という）の画面・使い方・扱うデータについて記載しています。</p>
<ul>
<li>本ツールの各画面の表示内容や構成の詳細については、「2. 画面」を参照してください。</li>
<li>本ツールの使い方については、「3. 使い方」を参照してください。</li>
<li>本ツールで扱うインポート/エクスポートデータについては、「4. 扱うデータ」を参照してください。</li>
</ul>
<h2 id="2-画面">2. 画面</h2>
<h2 id="2-1-トップ画面">2-1. トップ画面</h2>
<p>本ツールの実行ファイルを実行すると、以下の画面が表示されます。</p>
<p><img src="../resources/HowToUse/top_normal.png" alt="image"></p>
<p>CityGMLデータのインポートを行うと、以下のような表示内容になります。</p>
<p><img src="../resources/HowToUse/top.png" alt="image"></p>
<h3 id="citygmlインポートボタン">①CityGMLインポートボタン</h3>
<p>CityGMLインポートを行います。ボタン押下後に「2-2.CityGMLインポート画面」へ移動します。</p>
<h3 id="書き出しボタン">②書き出しボタン</h3>
<p>データセットエクスポートを行います。ボタン押下後に「2-3.データセットエクスポート画面」へ移動します。</p>
<h3 id="品質検査ボタン">③品質検査ボタン</h3>
<p>品質検査を行います。ボタン押下後に「2-4.品質検査画面」へ移動します。</p>
<h3 id="地物一覧エリア">④地物一覧エリア</h3>
<p>インポートしたデータの地物一覧を表示します。
右クリックで3Dファイルのインポート/エクスポートメニューを出すことができます。</p>
<h3 id="3dビューエリア">⑤3Dビューエリア</h3>
<p>インポートしたデータを3Dで描画します。</p>
<p>また、上部のメニューボタンを切り替えることで、マウス操作によって地物を移動・回転したり、描画するLODを変更できます。</p>
<p><img src="../resources/HowToUse/panel.png" alt="image"></p>
<table>
<thead>
<tr>
<th></th>
<th>項目名</th>
<th>操作説明</th>
<th>イメージ</th>
</tr>
</thead>
<tbody>
<tr>
<td>①</td>
<td>選択モード</td>
<td>マウスポインタによって地物を選択できます</td>
<td><img src="../resources/HowToUse/panel%E2%91%A0.png" alt="image"></td>
</tr>
<tr>
<td>②</td>
<td>移動モード</td>
<td>矢印をマウスで掴み移動させることで、地物を直線移動できます</td>
<td><img src="../resources/HowToUse/panel%E2%91%A1.png" alt="image"></td>
</tr>
<tr>
<td>③</td>
<td>回転モード</td>
<td>青い円上をマウスで掴み移動させることで、地物を回転できます</td>
<td><img src="../resources/HowToUse/panel%E2%91%A2.png" alt="image"></td>
</tr>
<tr>
<td>④</td>
<td>スケールモード</td>
<td>矢印をマウスで掴み移動させることで、地物を直線方向に拡大縮小できます</td>
<td><img src="../resources/HowToUse/panel%E2%91%A3.png" alt="image"></td>
</tr>
<tr>
<td>⑤</td>
<td>面表示モード</td>
<td>面（屋根面・壁面など）の定義ごとに色分けして表示できます</td>
<td><img src="../resources/HowToUse/surface_type_edit.png" alt="image"></td>
</tr>
<tr>
<td>⑥</td>
<td>LODモード</td>
<td>描画するLODを変更できます</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="地物詳細エリア">⑥地物詳細エリア</h3>
<p>地物一覧もしくは3Dビュー上で選択されている地物について、各属性値などを表示します。</p>
<table>
<thead>
<tr>
<th>項目名</th>
<th>説明</th>
<th>編集</th>
</tr>
</thead>
<tbody>
<tr>
<td>地物情報</td>
<td>CityGMLファイル内で定義されている地物IDと地物型</td>
<td>✕</td>
</tr>
<tr>
<td>描画LOD</td>
<td>3Dビュー上に表示するLOD</td>
<td>◯</td>
</tr>
<tr>
<td>形状オフセット</td>
<td>位置情報とスケール情報</td>
<td>◯</td>
</tr>
<tr>
<td>属性情報</td>
<td><a href="https://www.mlit.go.jp/plateaudocument/">3D都市モデル標準製品仕様書</a>で定義されている各属性値</td>
<td>◯</td>
</tr>
<tr>
<td>テクスチャ</td>
<td>地物のテクスチャ情報</td>
<td>◯</td>
</tr>
</tbody>
</table>
<h2 id="2-2-citygmlインポート画面">2-2. CityGMLインポート画面</h2>
<p>ファイル選択ウィンドウが表示され、PC上からインポートするCityGMLファイルを選択することができます。
その後、座標系を選択することができます。</p>
<p><img src="../resources/HowToUse/citygml_import%E2%91%A1.png" alt="image"></p>
<h2 id="2-3-データセットエクスポート画面">2-3. データセットエクスポート画面</h2>
<p>エクスポートするデータセットのファイル名を入力できます。その後、ファイル選択ウィンドウが表示され、エクスポートするPC上のフォルダを選択することができます。</p>
<p><img src="../resources/HowToUse/citygml_export.png" alt="image"></p>
<h2 id="2-4-品質検査画面">2-4. 品質検査画面</h2>
<p>品質検査パラメータと出力先フォルダをPC上で選択できます。
実行ボタン押下後に品質検査が実行され、画面上にログが出力されます。</p>
<p><img src="../resources/HowToUse/validation_1.png" alt="image"></p>
<h2 id="3-使い方">3. 使い方</h2>
<h2 id="3-1-citygmlデータをインポートする">3-1. CityGMLデータをインポートする</h2>
<p>トップ画面にて、インポートボタン押下後にインポートするCityGMLデータを選択し、開くボタンを押下します。</p>
<p><img src="../resources/HowToUse/citygml_import.png" alt="image"></p>
<p>対象の都道府県が含まれる座標系を選択し、インポートボタンを押下します。</p>
<p><img src="../resources/HowToUse/citygml_import%E2%91%A1.png" alt="image"></p>
<h2 id="3-2-citygmlデータを3dで視覚的に確認する">3-2. CityGMLデータを3Dで視覚的に確認する</h2>
<p>CityGMLデータのインポートを行うと、トップ画面-3Dビューエリアにて、各地物を3Dにて視覚的に確認できます。</p>
<p>また、以下の操作によって視点の回転・移動を行うことができます。
|制御|操作|
|---|---|
|マウスの右ボタン＋ドラッグ|視点を回転させます。|
|マウスの中央（ホイール）ボタン＋ドラッグ|視点を移動させます。|
|スクロール|視点をズームイン・アウトさせます。|
|地物をダブルクリック|視点を地物にフォーカスさせます。|</p>
<h2 id="3-3-地物の形状を更新する">3-3. 地物の形状を更新する</h2>
<p>他ツールなどで作成済みの3Dファイルをインポートして、地物の形状を更新することができます。</p>
<h3 id="3dファイルをエクスポートする">3Dファイルをエクスポートする</h3>
<p>3Dファイルの作成にあたって、本ツール内の地物をもとに作成したい場合は、本ツールから3Dファイルをエクスポートします。
※本ツール内の地物をもとに作成しない場合には、こちらの実施は不要です。</p>
<p><img src="../resources/HowToUse/hierarchy_context.png" alt="image"></p>
<p>トップ画面-地物一覧エリアにて右クリックを押下して、OBJファイルもしくはglTFファイルを選択し3Dエクスポート画面を開きます。</p>
<p>※TODO: 画像更新
<img src="../resources/HowToUse/3d_export.png" alt="image"></p>
<p>3Dファイルエクスポート画面では以下の項目が設定できます。</p>
<table>
<thead>
<tr>
<th>項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>出力先</td>
<td>エクスポートする3Dファイルのパスを設定します。</td>
</tr>
<tr>
<td>LOD</td>
<td>エクスポートするLODを指定します。</td>
</tr>
<tr>
<td>参照座標系</td>
<td>CityGMLインポート時に設定された参照座標系が表示されます。</td>
</tr>
<tr>
<td>基準点位置</td>
<td>参照座標系内での3Dファイルの原点位置を設定します。</td>
</tr>
<tr>
<td>東向きの軸</td>
<td>X, Y, Z, -X, -Y, -Zから3Dファイルの東向きの軸を設定します。</td>
</tr>
<tr>
<td>上向きの軸</td>
<td>X, Y, Z, -X, -Y, -Zから3Dファイルの上向きの軸を設定します。</td>
</tr>
</tbody>
</table>
<h3 id="3dファイルをインポートする">3Dファイルをインポートする</h3>
<p><img src="../resources/HowToUse/hierarchy_context.png" alt="image"></p>
<p>トップ画面-地物一覧エリアにて右クリックを押下して、OBJファイルもしくはglTFファイルを選択し3Dインポート画面を開きます。</p>
<p>※TODO: 画像更新
<img src="../resources/HowToUse/3d_import.png" alt="image"></p>
<p>3Dファイルエクスポート画面では以下の項目が設定できます。</p>
<table>
<thead>
<tr>
<th>項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>入力ファイル</td>
<td>インポートする3Dファイルのパスを設定します。</td>
</tr>
<tr>
<td>LOD</td>
<td>インポートするLODを指定します。</td>
</tr>
<tr>
<td>モデル配置</td>
<td>「参照座標系を利用」を選択した場合、手動で位置の指定ができます。「自動」の場合は形状の底面位置が合うように自動で位置合わせが行われます。</td>
</tr>
<tr>
<td>参照座標系</td>
<td>CityGMLインポート時に設定された参照座標系が表示されます。</td>
</tr>
<tr>
<td>基準点位置</td>
<td>参照座標系内での3Dファイルの原点位置を設定します。</td>
</tr>
<tr>
<td>東向きの軸</td>
<td>X, Y, Z, -X, -Y, -Zから3Dファイルの東向きの軸を設定します。</td>
</tr>
<tr>
<td>上向きの軸</td>
<td>X, Y, Z, -X, -Y, -Zから3Dファイルの上向きの軸を設定します。</td>
</tr>
</tbody>
</table>
<h2 id="3-4-地物の属性を編集する">3-4. 地物の属性を編集する</h2>
<p>トップ画面-地物一覧エリアもしくは3Dビューエリアにて該当地物を選択すると、地物詳細エリアに地物情報が表示されます。</p>
<p><img src="../resources/HowToUse/feature_info.png" alt="image"></p>
<p>地物情報パネル内の属性情報パネルから、属性情報の追加・削除・編集を行えます。</p>
<h3 id="属性情報の編集">属性情報の編集</h3>
<p>既存項目を編集したい場合は、値の欄をダブルクリックして値を修正します。CityGMLのattribute情報も編集したい場合は右クリックしてから「編集」を選択して属性編集画面を開いてください。</p>
<h4 id="codetypeの編集">CodeTypeの編集</h4>
<p><img src="../resources/HowToUse/attribute_edit_code.png" alt="image"></p>
<p>属性がCodeType型の場合、以下の手順でCodeSpaceと値を入力します。</p>
<ol>
<li>「CodeSpaceの選択」を押下し、一覧からCodeListのXMLファイルを選択します。
<img src="../resources/HowToUse/attribute_edit_code2.png" alt="image"></li>
<li>一覧からCodeTypeの値を選択します。
<img src="../resources/HowToUse/attribute_edit_code3.png" alt="image"></li>
</ol>
<h4 id="measuretypeの編集">MeasureTypeの編集</h4>
<p><img src="../resources/HowToUse/attribute_edit_uom.png" alt="image"></p>
<p>属性がMeasureType型の場合、画面からuomおよび値を入力します。</p>
<h3 id="属性情報の追加">属性情報の追加</h3>
<p>地物に新規属性を追加するには、＋ボタンを押下して属性追加画面を開きます。既に追加されている親要素に新規属性を追加したい場合は親属性を右クリックしてから「追加」を選択してください。</p>
<p><img src="../resources/HowToUse/attribute_add.png" alt="image"></p>
<p>属性追加画面では追加したい属性のタグ名を選択します。画面上部の検索パネルを入力すると入力文字列でタグ名の一覧がフィルタリングされます。</p>
<p>属性をダブルクリックすると追加属性の編集画面が開きます。基本的には<a href="#%E5%B1%9E%E6%80%A7%E6%83%85%E5%A0%B1%E3%81%AE%E7%B7%A8%E9%9B%86">属性情報の編集</a>と同様の画面が表示されますが、親要素の追加の際は必須属性の編集画面が表示されます。</p>
<p><img src="../resources/HowToUse/attribute_add2.png" alt="image"></p>
<p>各必須属性を入力した後、追加ボタンを押すことで属性が追加されます。</p>
<h2 id="3-5-地物の面屋根面壁面などを編集する">3-5. 地物の面（屋根面・壁面など）を編集する</h2>
<p>地物の面を編集するには、「面表示モード」をONにして面編集画面を開きます。</p>
<p><img src="../resources/HowToUse/surface_view_mode.png" alt="image"></p>
<h3 id="ポリゴン編集パネル">ポリゴン編集パネル</h3>
<p><img src="../resources/HowToUse/surface_type_edit.png" alt="image"></p>
<p>ポリゴン編集パネルでは以下の手順で各ポリゴンの地物型を編集できます。</p>
<ol>
<li>3Dビューから編集したいポリゴンを選択します。</li>
<li>変更後の地物型を選択します。</li>
</ol>
<p>ポリゴンの地物型が変更されると、建築物のboundedBy要素として新しい地物が生成され、その子要素としてポリゴンが登録されます。</p>
<h3 id="地物編集パネル">地物編集パネル</h3>
<p><img src="../resources/HowToUse/feature_type_edit.png" alt="image"></p>
<p>地物編集パネルでは「タイプ編集」、「面編集」、「開口部編集」が行えます。</p>
<h4 id="タイプ編集">タイプ編集</h4>
<p><img src="../resources/HowToUse/feature_type_edit.png" alt="image"></p>
<p>ポリゴン編集パネルでは以下の手順で各地物の地物型を編集できます。</p>
<ol>
<li>3Dビューから編集したい地物を選択します。</li>
<li>変更後の地物型を選択します。</li>
</ol>
<h4 id="面編集">面編集</h4>
<p>面編集パネルでは以下の手順で各地物のポリゴンを追加・削除できます。</p>
<ol>
<li>3Dビューから編集したい地物を選択します。
<img src="../resources/HowToUse/feature_polygon_edit_select.png" alt="image"></li>
<li>編集ボタンを押した後、追加・削除したいポリゴンを3Dビュー上で選択します。
<img src="../resources/HowToUse/feature_polygon_edit.png" alt="image"></li>
<li>決定ボタンを押すと変更が適用されます。</li>
</ol>
<h4 id="開口部編集">開口部編集</h4>
<p>開口部編集パネルでは以下の手順で各地物の開口部を編集できます。</p>
<ol>
<li>3Dビューから編集したい地物を選択します。
<img src="../resources/HowToUse/feature_opening_select.png" alt="image"></li>
<li>編集ボタンを押した後、追加・削除したい開口部を3Dビュー上で選択します。
<img src="../resources/HowToUse/feature_opening_edit.png" alt="image"></li>
<li>決定ボタンを押すと変更が適用されます。</li>
</ol>
<p>適用後に地物型が以下のように変換されます。</p>
<ul>
<li>Window、Door型以外の地物を開口部として選択した状態で変更が適用された場合、Window型に変換されます。</li>
<li>地物が開口部から削除された場合、WallSurface型に変換されます。</li>
</ul>
<h2 id="3-6-citygmlデータを品質検査する">3-6. CityGMLデータを品質検査する</h2>
<p>トップ画面から品質検査ボタンを押して品質検査画面を開きます。</p>
<p><img src="../resources/HowToUse/validation_1.png" alt="image"></p>
<p>品質検査パラメータと出力フォルダを変更したい場合、参照ボタンを押下して各ファイルを指定します。</p>
<p>実行ボタンを押下するとインポートされた3D都市モデルに対して品質検査処理が実行され、画面上の品質検査ログ画面に品質検査結果が表示されます。</p>
<p><img src="../resources/HowToUse/validation_2.png" alt="image"></p>
<p>品質検査でエラーが検知された場合、赤文字でエラーメッセージが表示されます。各メッセージをクリックすることでエラーが発生している地物が3Dビュー上で選択され、メッセージの詳細が確認できます。また、エラーが発生しているポリゴンは3Dビュー上で赤色でハイライトされます。</p>
<h2 id="3-7-citygmlのデータセットをエクスポートする">3-7. CityGMLのデータセットをエクスポートする</h2>
<p>編集した3D都市モデルは以下の手順でCityGMLのデータセットとしてエクスポート出来ます。</p>
<ol>
<li>トップ画面から書き出しボタンを押下します。</li>
<li>データセットのフォルダ名を入力します。
<img src="../resources/HowToUse/citygml_export.png" alt="image"></li>
<li>出力フォルダを選択し、開くボタンを押下します。
<img src="../resources/HowToUse/citygml_export%E2%91%A1.png" alt="image"></li>
</ol>
<p>エクスポートが完了するとエクスポート先のフォルダが開きます。</p>
<h2 id="4-扱うデータ">4. 扱うデータ</h2>
<h2 id="4-1-citygmlデータ">4-1. CityGMLデータ</h2>
<p>CityGMLインポート機能でインポートできるデータは以下のとおりです。</p>
<table>
<thead>
<tr>
<th>ファイル構成</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>XXXXX.gml</td>
<td>citygml形式のファイル</td>
</tr>
</tbody>
</table>
<h2 id="4-2-3dファイルデータ">4-2. 3Dファイルデータ</h2>
<p>3Dファイルインポート機能でインポートできるデータは以下のとおりです。</p>
<table>
<thead>
<tr>
<th>ファイル構成</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>XXXXX.obj もしくは XXXXX.gltf</td>
<td>OBJもしくはglTF形式のファイル</td>
</tr>
</tbody>
</table>
<h2 id="4-3-データセット">4-3. データセット</h2>
<p>データセットエクスポート機能で出力されるデータは以下のとおりです。</p>
<table>
<thead>
<tr>
<th>ファイル構成</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>codelists</td>
<td>3D都市モデル標準製品仕様書Ver.3.2で定義されているコード値ファイルと、インポートしたCityGMLデータに含まれるコード値ファイル</td>
</tr>
<tr>
<td>metadata</td>
<td>インポートしたCityGMLデータに含まれるmetadataファイルをもとに、日付やデータに含まれる地物型/LODの値のみ変更したファイル</td>
</tr>
<tr>
<td>schemas</td>
<td>インポートしたCityGMLデータに含まれるschemasファイル</td>
</tr>
<tr>
<td>specification</td>
<td>インポートしたCityGMLデータに含まれるspecificationファイル</td>
</tr>
<tr>
<td>udx</td>
<td>インポートしたCityGMLデータに含まれる全ての地物の3D都市モデルファイル</td>
</tr>
</tbody>
</table>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Synesthesias/PLATEAU-CityGML-Editor/blob/fix/manual/Documentation/manual/HowToUse.md/#L1" class="contribution-link">Edit this page</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      PLATEAU
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
